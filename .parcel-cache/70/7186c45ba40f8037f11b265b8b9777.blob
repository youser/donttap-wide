import   "e896de80a33cd7de679c6d900dd952fc:@swc/helpers";
var $e896de80a33cd7de679c6d900dd952fc$var$appDiv = document.getElementById('app');
var $e896de80a33cd7de679c6d900dd952fc$var$canvasDiv = document.getElementById('canvas');
var $e896de80a33cd7de679c6d900dd952fc$var$ctx = $e896de80a33cd7de679c6d900dd952fc$var$canvasDiv.getContext('2d');
var $e896de80a33cd7de679c6d900dd952fc$var$bColor = '#ff0107';
var $e896de80a33cd7de679c6d900dd952fc$var$fColor = '#f1f7ff';
var $e896de80a33cd7de679c6d900dd952fc$var$aColor = '#000107';
var $e896de80a33cd7de679c6d900dd952fc$var$h = 4;
var $e896de80a33cd7de679c6d900dd952fc$var$w = 4;
var $e896de80a33cd7de679c6d900dd952fc$var$bSize = 1;
var $e896de80a33cd7de679c6d900dd952fc$var$cellSize = 100;
if (window.innerWidth < 446) $e896de80a33cd7de679c6d900dd952fc$var$cellSize = 72;
else if (window.innerWidth > 1024) $e896de80a33cd7de679c6d900dd952fc$var$cellSize = 128;
$e896de80a33cd7de679c6d900dd952fc$var$canvasDiv.height = $e896de80a33cd7de679c6d900dd952fc$var$h * ($e896de80a33cd7de679c6d900dd952fc$var$cellSize + $e896de80a33cd7de679c6d900dd952fc$var$bSize) + $e896de80a33cd7de679c6d900dd952fc$var$bSize;
$e896de80a33cd7de679c6d900dd952fc$var$canvasDiv.width = $e896de80a33cd7de679c6d900dd952fc$var$w * ($e896de80a33cd7de679c6d900dd952fc$var$cellSize + $e896de80a33cd7de679c6d900dd952fc$var$bSize) + $e896de80a33cd7de679c6d900dd952fc$var$bSize;
function $e896de80a33cd7de679c6d900dd952fc$var$renderSquare(x, y, cColor) {
    $e896de80a33cd7de679c6d900dd952fc$var$ctx.fillStyle = cColor;
    var rX = y * ($e896de80a33cd7de679c6d900dd952fc$var$cellSize + $e896de80a33cd7de679c6d900dd952fc$var$bSize) + $e896de80a33cd7de679c6d900dd952fc$var$bSize;
    var rY = x * ($e896de80a33cd7de679c6d900dd952fc$var$cellSize + $e896de80a33cd7de679c6d900dd952fc$var$bSize) + $e896de80a33cd7de679c6d900dd952fc$var$bSize;
    $e896de80a33cd7de679c6d900dd952fc$var$ctx.fillRect(rY, rX, $e896de80a33cd7de679c6d900dd952fc$var$cellSize, $e896de80a33cd7de679c6d900dd952fc$var$cellSize);
}
function $e896de80a33cd7de679c6d900dd952fc$var$render(param, param1) {
    var _bColor = param === void 0 ? $e896de80a33cd7de679c6d900dd952fc$var$bColor : param, _fColor = param1 === void 0 ? $e896de80a33cd7de679c6d900dd952fc$var$fColor : param1;
    $e896de80a33cd7de679c6d900dd952fc$var$ctx.fillStyle = _bColor;
    $e896de80a33cd7de679c6d900dd952fc$var$ctx.fillRect(0, 0, ($e896de80a33cd7de679c6d900dd952fc$var$cellSize + $e896de80a33cd7de679c6d900dd952fc$var$bSize) * $e896de80a33cd7de679c6d900dd952fc$var$h + $e896de80a33cd7de679c6d900dd952fc$var$bSize, ($e896de80a33cd7de679c6d900dd952fc$var$cellSize + $e896de80a33cd7de679c6d900dd952fc$var$bSize) * $e896de80a33cd7de679c6d900dd952fc$var$w + $e896de80a33cd7de679c6d900dd952fc$var$bSize);
    $e896de80a33cd7de679c6d900dd952fc$var$ctx.fillStyle = _fColor;
    for(var y = 0; y < $e896de80a33cd7de679c6d900dd952fc$var$h; ++y)for(var x = 0; x < $e896de80a33cd7de679c6d900dd952fc$var$w; ++x){
        var rX = y * ($e896de80a33cd7de679c6d900dd952fc$var$cellSize + $e896de80a33cd7de679c6d900dd952fc$var$bSize) + $e896de80a33cd7de679c6d900dd952fc$var$bSize;
        var rY = x * ($e896de80a33cd7de679c6d900dd952fc$var$cellSize + $e896de80a33cd7de679c6d900dd952fc$var$bSize) + $e896de80a33cd7de679c6d900dd952fc$var$bSize;
        $e896de80a33cd7de679c6d900dd952fc$var$ctx.fillRect(rY, rX, $e896de80a33cd7de679c6d900dd952fc$var$cellSize, $e896de80a33cd7de679c6d900dd952fc$var$cellSize);
    }
}
function $e896de80a33cd7de679c6d900dd952fc$var$renderBorders(param) {
    var sColor = param === void 0 ? $e896de80a33cd7de679c6d900dd952fc$var$bColor : param;
    $e896de80a33cd7de679c6d900dd952fc$var$ctx.strokeStyle = sColor;
    for(var x = 0; x <= $e896de80a33cd7de679c6d900dd952fc$var$w; ++x){
        $e896de80a33cd7de679c6d900dd952fc$var$ctx.moveTo(x * ($e896de80a33cd7de679c6d900dd952fc$var$cellSize + $e896de80a33cd7de679c6d900dd952fc$var$bSize) + 0.5, 0);
        $e896de80a33cd7de679c6d900dd952fc$var$ctx.lineTo(x * ($e896de80a33cd7de679c6d900dd952fc$var$cellSize + $e896de80a33cd7de679c6d900dd952fc$var$bSize) + 0.5, $e896de80a33cd7de679c6d900dd952fc$var$h * ($e896de80a33cd7de679c6d900dd952fc$var$cellSize + $e896de80a33cd7de679c6d900dd952fc$var$bSize) + $e896de80a33cd7de679c6d900dd952fc$var$bSize);
        $e896de80a33cd7de679c6d900dd952fc$var$ctx.stroke();
    }
    for(var y = 0; y <= $e896de80a33cd7de679c6d900dd952fc$var$h; ++y){
        $e896de80a33cd7de679c6d900dd952fc$var$ctx.moveTo(0, y * ($e896de80a33cd7de679c6d900dd952fc$var$cellSize + $e896de80a33cd7de679c6d900dd952fc$var$bSize) + 0.5);
        $e896de80a33cd7de679c6d900dd952fc$var$ctx.lineTo($e896de80a33cd7de679c6d900dd952fc$var$w * ($e896de80a33cd7de679c6d900dd952fc$var$cellSize + $e896de80a33cd7de679c6d900dd952fc$var$bSize) + $e896de80a33cd7de679c6d900dd952fc$var$bSize, y * ($e896de80a33cd7de679c6d900dd952fc$var$cellSize + $e896de80a33cd7de679c6d900dd952fc$var$bSize) + 0.5);
        $e896de80a33cd7de679c6d900dd952fc$var$ctx.stroke();
    }
}
var $e896de80a33cd7de679c6d900dd952fc$var$speed = 0;
var $e896de80a33cd7de679c6d900dd952fc$var$clicks = 0;
var $e896de80a33cd7de679c6d900dd952fc$var$misses = 0;
var $e896de80a33cd7de679c6d900dd952fc$var$accuracy = 1;
var $e896de80a33cd7de679c6d900dd952fc$var$breakPoint = 4;
var $e896de80a33cd7de679c6d900dd952fc$var$missStreak = 0;
var $e896de80a33cd7de679c6d900dd952fc$var$state = 'STOP';
var $e896de80a33cd7de679c6d900dd952fc$var$clock = 0;
var $e896de80a33cd7de679c6d900dd952fc$var$secToLife = 2;
var $e896de80a33cd7de679c6d900dd952fc$var$startTime = new Date();
var $e896de80a33cd7de679c6d900dd952fc$var$clickTime = $e896de80a33cd7de679c6d900dd952fc$var$startTime;
var $e896de80a33cd7de679c6d900dd952fc$var$hitTime = $e896de80a33cd7de679c6d900dd952fc$var$startTime;
var $e896de80a33cd7de679c6d900dd952fc$var$clickStamps = [];
var $e896de80a33cd7de679c6d900dd952fc$var$gameMap = [];
var $e896de80a33cd7de679c6d900dd952fc$var$squares = [];
var $e896de80a33cd7de679c6d900dd952fc$var$clockDiv = document.getElementById('clock');
var $e896de80a33cd7de679c6d900dd952fc$var$infoDiv = document.getElementById('information');
var $e896de80a33cd7de679c6d900dd952fc$var$intervalId = -1;
function $e896de80a33cd7de679c6d900dd952fc$var$textNumber(number) {
    tNumber = String(Math.round(number * 100) / 100);
    if (tNumber.slice(-2, -1) == '.') tNumber += '0';
    if (tNumber.slice(-3, -2) != '.') tNumber += '.00';
    return tNumber;
}
function $e896de80a33cd7de679c6d900dd952fc$var$gameover() {
    $e896de80a33cd7de679c6d900dd952fc$var$state = 'GAMEOVER';
    clearInterval($e896de80a33cd7de679c6d900dd952fc$var$intervalId);
    $e896de80a33cd7de679c6d900dd952fc$var$clock = 0;
    $e896de80a33cd7de679c6d900dd952fc$var$clockDiv.classList.add('gameover');
    $e896de80a33cd7de679c6d900dd952fc$var$render($e896de80a33cd7de679c6d900dd952fc$var$bColor, $e896de80a33cd7de679c6d900dd952fc$var$aColor);
}
function $e896de80a33cd7de679c6d900dd952fc$var$colorProgress(c1, c2, x) {
    var r1 = parseInt(c1.slice(1, 3), 16);
    var g1 = parseInt(c1.slice(3, 5), 16);
    var b1 = parseInt(c1.slice(5, 7), 16);
    var r2 = parseInt(c2.slice(1, 3), 16);
    var g2 = parseInt(c2.slice(3, 5), 16);
    var b2 = parseInt(c2.slice(5, 7), 16);
    var r3 = parseInt(r1 + (r2 - r1) * x).toString(16);
    var g3 = parseInt(g1 + (g2 - g1) * x).toString(16);
    var b3 = parseInt(b1 + (b2 - b1) * x).toString(16);
    r3 = r3.length == 1 ? '0' + r3 : r3;
    g3 = g3.length == 1 ? '0' + g3 : g3;
    b3 = b3.length == 1 ? '0' + b3 : b3;
    return "#".concat(r3).concat(g3).concat(b3);
}
function $e896de80a33cd7de679c6d900dd952fc$var$run() {
    if ($e896de80a33cd7de679c6d900dd952fc$var$state != 'RUNNING') return;
    var d = new Date();
    var i = 0;
    for(; i < $e896de80a33cd7de679c6d900dd952fc$var$clickStamps.length; ++i){
        if ((d - $e896de80a33cd7de679c6d900dd952fc$var$clickStamps[i]) / 1000 > 10) break;
    }
    $e896de80a33cd7de679c6d900dd952fc$var$clock = (d - $e896de80a33cd7de679c6d900dd952fc$var$startTime) / 1000;
    $e896de80a33cd7de679c6d900dd952fc$var$speed = i / ($e896de80a33cd7de679c6d900dd952fc$var$clock < 10 ? $e896de80a33cd7de679c6d900dd952fc$var$clock || 1 : 10);
    $e896de80a33cd7de679c6d900dd952fc$var$accuracy = $e896de80a33cd7de679c6d900dd952fc$var$clicks ? $e896de80a33cd7de679c6d900dd952fc$var$clicks / ($e896de80a33cd7de679c6d900dd952fc$var$clicks + $e896de80a33cd7de679c6d900dd952fc$var$misses) : 1;
    var tSpeed = $e896de80a33cd7de679c6d900dd952fc$var$textNumber($e896de80a33cd7de679c6d900dd952fc$var$speed);
    var tClicks = String($e896de80a33cd7de679c6d900dd952fc$var$clicks);
    var tAccuracy = $e896de80a33cd7de679c6d900dd952fc$var$textNumber($e896de80a33cd7de679c6d900dd952fc$var$accuracy);
    $e896de80a33cd7de679c6d900dd952fc$var$infoDiv.textContent = "".concat(tSpeed, " / ").concat(tClicks, " / ").concat(tAccuracy);
    if ($e896de80a33cd7de679c6d900dd952fc$var$clock > 0) $e896de80a33cd7de679c6d900dd952fc$var$clockDiv.textContent = $e896de80a33cd7de679c6d900dd952fc$var$textNumber($e896de80a33cd7de679c6d900dd952fc$var$clock);
    else $e896de80a33cd7de679c6d900dd952fc$var$clockDiv.textContent = '0.00';
    var _iteratorNormalCompletion = true, _didIteratorError = false, _iteratorError = undefined;
    if ((d - $e896de80a33cd7de679c6d900dd952fc$var$hitTime) / 1000 > $e896de80a33cd7de679c6d900dd952fc$var$secToLife) {
        $e896de80a33cd7de679c6d900dd952fc$var$gameover();
        return false;
    } else try {
        for(var _iterator = $e896de80a33cd7de679c6d900dd952fc$var$squares[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true){
            var cell = _step.value;
            var ref = $e896de80a33cd7de679c6d900dd952fc$import$585280336a2bc659$28fbc1c1f80cc2b(cell.split('.'), 2), x = ref[0], y = ref[1];
            $e896de80a33cd7de679c6d900dd952fc$var$renderSquare(x, y, $e896de80a33cd7de679c6d900dd952fc$var$colorProgress($e896de80a33cd7de679c6d900dd952fc$var$aColor, $e896de80a33cd7de679c6d900dd952fc$var$fColor, (d - $e896de80a33cd7de679c6d900dd952fc$var$hitTime) / 1000 / $e896de80a33cd7de679c6d900dd952fc$var$secToLife));
        }
    } catch (err) {
        _didIteratorError = true;
        _iteratorError = err;
    } finally{
        try {
            if (!_iteratorNormalCompletion && _iterator.return != null) {
                _iterator.return();
            }
        } finally{
            if (_didIteratorError) {
                throw _iteratorError;
            }
        }
    }
}
function $e896de80a33cd7de679c6d900dd952fc$var$randomCell() {
    var index = Math.floor(Math.random() * $e896de80a33cd7de679c6d900dd952fc$var$gameMap.length);
    var cell = $e896de80a33cd7de679c6d900dd952fc$var$gameMap[index];
    $e896de80a33cd7de679c6d900dd952fc$var$squares.push(cell);
    var ref = $e896de80a33cd7de679c6d900dd952fc$import$585280336a2bc659$28fbc1c1f80cc2b(cell.split('.'), 2), x = ref[0], y = ref[1];
    $e896de80a33cd7de679c6d900dd952fc$var$renderSquare(x, y, $e896de80a33cd7de679c6d900dd952fc$var$aColor);
    $e896de80a33cd7de679c6d900dd952fc$var$gameMap.splice(index, 1);
}
var $e896de80a33cd7de679c6d900dd952fc$var$activeCells = 3;
function $e896de80a33cd7de679c6d900dd952fc$var$start() {
    $e896de80a33cd7de679c6d900dd952fc$var$clockDiv.classList.remove('gameover');
    $e896de80a33cd7de679c6d900dd952fc$var$gameMap = [];
    for(var y = 0; y < $e896de80a33cd7de679c6d900dd952fc$var$h; ++y)for(var x = 0; x < $e896de80a33cd7de679c6d900dd952fc$var$w; ++x)$e896de80a33cd7de679c6d900dd952fc$var$gameMap.push("".concat(x, ".").concat(y));
    $e896de80a33cd7de679c6d900dd952fc$var$render();
    $e896de80a33cd7de679c6d900dd952fc$var$squares = [];
    for(var i = 0; i < $e896de80a33cd7de679c6d900dd952fc$var$activeCells; ++i)$e896de80a33cd7de679c6d900dd952fc$var$randomCell();
    $e896de80a33cd7de679c6d900dd952fc$var$speed = 0;
    $e896de80a33cd7de679c6d900dd952fc$var$clicks = 0;
    $e896de80a33cd7de679c6d900dd952fc$var$misses = 0;
    $e896de80a33cd7de679c6d900dd952fc$var$missStreak = 0;
    $e896de80a33cd7de679c6d900dd952fc$var$accuracy = 1;
    $e896de80a33cd7de679c6d900dd952fc$var$clock = 0;
    $e896de80a33cd7de679c6d900dd952fc$var$secToLife = 2;
    $e896de80a33cd7de679c6d900dd952fc$var$startTime = new Date();
    $e896de80a33cd7de679c6d900dd952fc$var$clickTime = $e896de80a33cd7de679c6d900dd952fc$var$startTime;
    $e896de80a33cd7de679c6d900dd952fc$var$hitTime = $e896de80a33cd7de679c6d900dd952fc$var$startTime;
    $e896de80a33cd7de679c6d900dd952fc$var$clickStamps = [];
    $e896de80a33cd7de679c6d900dd952fc$var$state = 'RUNNING';
    $e896de80a33cd7de679c6d900dd952fc$var$intervalId = setInterval($e896de80a33cd7de679c6d900dd952fc$var$run, 0);
}
var $e896de80a33cd7de679c6d900dd952fc$var$clickSound = new Audio('click.wav');
$e896de80a33cd7de679c6d900dd952fc$var$clickSound.volume = 0.2;
function $e896de80a33cd7de679c6d900dd952fc$var$hit(event) {
    $e896de80a33cd7de679c6d900dd952fc$var$clicks += 1;
    if ($e896de80a33cd7de679c6d900dd952fc$var$state == 'RUNNING') {
        var x, y;
        if (event instanceof TouchEvent) {
            x = event.touches[0].clientX - $e896de80a33cd7de679c6d900dd952fc$var$canvasDiv.offsetLeft;
            y = event.touches[0].clientY - $e896de80a33cd7de679c6d900dd952fc$var$canvasDiv.offsetTop;
        } else {
            x = event.offsetX;
            y = event.offsetY;
        }
        if (x == 0 || y == 0 || x == this.width || y == this.height) {
            $e896de80a33cd7de679c6d900dd952fc$var$misses += 1;
            $e896de80a33cd7de679c6d900dd952fc$var$missStreak += 1;
        } else {
            var cellX = Math.floor((x - x % ($e896de80a33cd7de679c6d900dd952fc$var$cellSize + $e896de80a33cd7de679c6d900dd952fc$var$bSize)) / $e896de80a33cd7de679c6d900dd952fc$var$cellSize);
            var cellY = Math.floor((y - y % ($e896de80a33cd7de679c6d900dd952fc$var$cellSize + $e896de80a33cd7de679c6d900dd952fc$var$bSize)) / $e896de80a33cd7de679c6d900dd952fc$var$cellSize);
            if ($e896de80a33cd7de679c6d900dd952fc$var$gameMap.includes("".concat(cellX, ".").concat(cellY)) || cellY >= $e896de80a33cd7de679c6d900dd952fc$var$h || cellX >= $e896de80a33cd7de679c6d900dd952fc$var$w) {
                $e896de80a33cd7de679c6d900dd952fc$var$misses += 1;
                $e896de80a33cd7de679c6d900dd952fc$var$missStreak += 1;
            } else {
                $e896de80a33cd7de679c6d900dd952fc$var$hitTime = new Date();
                $e896de80a33cd7de679c6d900dd952fc$var$missStreak = 0;
                $e896de80a33cd7de679c6d900dd952fc$var$squares.splice($e896de80a33cd7de679c6d900dd952fc$var$squares.indexOf("".concat(cellX, ".").concat(cellY)), 1);
                $e896de80a33cd7de679c6d900dd952fc$var$gameMap.push("".concat(cellX, ".").concat(cellY));
                $e896de80a33cd7de679c6d900dd952fc$var$renderSquare(cellX, cellY, $e896de80a33cd7de679c6d900dd952fc$var$fColor);
                $e896de80a33cd7de679c6d900dd952fc$var$randomCell();
                $e896de80a33cd7de679c6d900dd952fc$var$clickSound.pause();
                $e896de80a33cd7de679c6d900dd952fc$var$clickSound.currentTime = 0;
                $e896de80a33cd7de679c6d900dd952fc$var$clickSound.play();
            }
        }
        $e896de80a33cd7de679c6d900dd952fc$var$clickTime = new Date();
        $e896de80a33cd7de679c6d900dd952fc$var$clickStamps.unshift($e896de80a33cd7de679c6d900dd952fc$var$clickTime);
        if ($e896de80a33cd7de679c6d900dd952fc$var$missStreak >= $e896de80a33cd7de679c6d900dd952fc$var$breakPoint) $e896de80a33cd7de679c6d900dd952fc$var$gameover();
        if ($e896de80a33cd7de679c6d900dd952fc$var$clicks % 10 == 0) $e896de80a33cd7de679c6d900dd952fc$var$secToLife *= 0.9966;
    } else $e896de80a33cd7de679c6d900dd952fc$var$start();
    if (window.getSelection) window.getSelection().removeAllRanges();
    else if (document.selection) document.selection.empty();
}
$e896de80a33cd7de679c6d900dd952fc$var$render($e896de80a33cd7de679c6d900dd952fc$var$bColor, $e896de80a33cd7de679c6d900dd952fc$var$aColor);
var $e896de80a33cd7de679c6d900dd952fc$var$cX = void 0, $e896de80a33cd7de679c6d900dd952fc$var$cY = void 0;
$e896de80a33cd7de679c6d900dd952fc$var$canvasDiv.addEventListener('mousemove', function(e) {
    $e896de80a33cd7de679c6d900dd952fc$var$cX = e.clientX;
    $e896de80a33cd7de679c6d900dd952fc$var$cY = e.clientY;
});
$e896de80a33cd7de679c6d900dd952fc$var$canvasDiv.addEventListener('touchstart', function(e) {
    $e896de80a33cd7de679c6d900dd952fc$var$hit(e);
    e.preventDefault();
    return false;
});
$e896de80a33cd7de679c6d900dd952fc$var$canvasDiv.addEventListener('mousedown', $e896de80a33cd7de679c6d900dd952fc$var$hit);
$e896de80a33cd7de679c6d900dd952fc$var$canvasDiv.addEventListener('contextmenu', function(e) {
    e.preventDefault();
    return false;
});
document.body.addEventListener('keydown', function(e) {
    if ([
        'Space',
        'Escape'
    ].includes(e.code)) $e896de80a33cd7de679c6d900dd952fc$var$start();
    else if ([
        'KeyZ',
        'KeyX',
        'KeyC',
        'KeyV'
    ].includes(e.code)) {
        var event = new MouseEvent('mousedown', {
            view: window,
            bubbles: true,
            cancelable: true,
            clientX: $e896de80a33cd7de679c6d900dd952fc$var$cX,
            clientY: $e896de80a33cd7de679c6d900dd952fc$var$cY
        });
        $e896de80a33cd7de679c6d900dd952fc$var$canvasDiv.dispatchEvent(event);
    }
});
window.addEventListener('resize', function(e) {
    if ($e896de80a33cd7de679c6d900dd952fc$var$state != 'RUNNING') {
        $e896de80a33cd7de679c6d900dd952fc$var$cellSize = 100;
        if (window.innerWidth < 446) $e896de80a33cd7de679c6d900dd952fc$var$cellSize = 72;
        else if (window.innerWidth > 1024) $e896de80a33cd7de679c6d900dd952fc$var$cellSize = 128;
        $e896de80a33cd7de679c6d900dd952fc$var$canvasDiv.height = $e896de80a33cd7de679c6d900dd952fc$var$h * ($e896de80a33cd7de679c6d900dd952fc$var$cellSize + $e896de80a33cd7de679c6d900dd952fc$var$bSize) + $e896de80a33cd7de679c6d900dd952fc$var$bSize;
        $e896de80a33cd7de679c6d900dd952fc$var$canvasDiv.width = $e896de80a33cd7de679c6d900dd952fc$var$w * ($e896de80a33cd7de679c6d900dd952fc$var$cellSize + $e896de80a33cd7de679c6d900dd952fc$var$bSize) + $e896de80a33cd7de679c6d900dd952fc$var$bSize;
        $e896de80a33cd7de679c6d900dd952fc$var$render($e896de80a33cd7de679c6d900dd952fc$var$bColor, $e896de80a33cd7de679c6d900dd952fc$var$aColor);
    }
});
